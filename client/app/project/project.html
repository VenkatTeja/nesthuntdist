<div class="fullW thumbs_wrap paddingLR bglg">
	<div id="hidden"></div>
	<h2 class="colorbl centric">Add/Edit Project</h2>
<section class="thumbs_wrap" ng-class="{ 'col-md-4' : projectCtrl.myProjects.length, 'col-md-2' : !projectCtrl.myProjects.length}">
	<div class="fullW bgw box_shadow_dwn borderLt padding10" ng-repeat="project in projectCtrl.myProjects" style="margin-bottom:10px">{{project.name}}<br/>{{project.type.type}}</div>
</section>
<section class="thumbs_wrap col-md-8">

	<section class="fullW thumbs_wrap bgw borderLt">
		<div ng-repeat="step in projectCtrl.steps" class="thumbs_wrap valignOut col-xs-{{12/projectCtrl.steps.length}}" style="padding:20px 10px" ng-class="{colorblue: projectCtrl.uploadStep==($index+1)}">
				{{step.name}} ({{$index+1}}/{{projectCtrl.steps.length}})
		</div >
	</section>
	<section class="fullW thumbs_wrap bgw borderLt padding10" ng-repeat="step in projectCtrl.steps" ng-show="projectCtrl.uploadStep==step.number">
		<form name="projectForm">
			<div ng-include="'step'+step.number+'.html'"></div>
			<md-button class="md-primary" ng-hide="step.number==1" ng-click="projectCtrl.nextStep(-1)">Back</md-button>
			<md-button class="md-primary floatR" ng-disabled="formStep{{step.number}}.$invalid" ng-hide="step.number==5" ng-click="projectCtrl.nextStep(1)">Next ({{step.number}}/3)</md-button>
			<button type="button" class="b2w floatR" ng-click="projectCtrl.savePost(projectCtrl.project)" ng-show="projectCtrl.newUpload.length==1" style="padding: 10px" ng-disabled="formStep3.$invalid || formStep2.$invalid">Save Edit</button>
		</form>
	</section>
</section>
</div>

<script type="text/ng-template" id="step2.html">
	<div layout="row">
		<md-input-container flex="100">
			<label>Project Name</label>
			<input autofocus required name="name" ng-model="projectCtrl.project.name">
			<div ng-messages="projectForm.name.$error">
				<div ng-message="required">This is required.</div>
			</div>
		</md-input-container>
	</div>

	<md-input-container class="md-block fullW thumbs_wrap">
		<label>Description</label>
		<input md-maxlength="100" required md-no-asterisk name="description" ng-model="projectCtrl.project.info">
		<div ng-messages="projectForm.description.$error">
			<div ng-message="required">This is required.</div>
			<div ng-message="md-maxlength">The description must be less than 100 characters long.</div>
		</div>
	</md-input-container>
	<div class="fullW thumbs_wrap">
		<label class="floatL fullW thumbs_wrap">Project Status</label>
		<md-radio-group ng-model="projectCtrl.project.status">
	      	<md-radio-button value="1" class="md-primary col-sm-4">Ongoing</md-radio-button>
	      	<md-radio-button value="2" class="col-sm-4"> Upcoming </md-radio-button>
	      	<md-radio-button value="0" class="col-sm-4">Completed</md-radio-button>
	    </md-radio-group>
	</div>

	<md-input-container>
		<label>Project email Id</label>
		<input required name="mailId" ng-model="projectCtrl.project.mailId">
		<div ng-messages="projectForm.mailId.$error">
			<div ng-message="required">This is required.</div>
		</div>
	</md-input-container>
</script>
<script type="text/ng-template" id="step3.html">
<div class="fullW thumbs_wrap">
	<label class="floatL fullW thumbs_wrap">Choose one</label>
	<md-radio-group ng-model="projectCtrl.project.type.type">
      	<md-radio-button value="1" class="md-primary col-sm-4">Land</md-radio-button>
      	<md-radio-button value="2" class="col-sm-4"> Flat </md-radio-button>
      	<md-radio-button value="3" class="col-sm-4">Villa</md-radio-button>
    </md-radio-group>
</div>
<hr/>

<md-input-container>
	<label>Number of <span ng-if="projectCtrl.project.type==1">Plots</span><span ng-if="projectCtrl.project.type==2">Towers</span><span ng-if="projectCtrl.project.type==3">Villas</span></label>
	<input type="number" required name="num" ng-model="projectCtrl.project.type.num" ng-change="projectCtrl.setSize(projectCtrl.project.type.num)">
	<div ng-messages="projectForm.num.$error">
		<div ng-message="required">This is required.</div>
	</div>
</md-input-container>


<div class="fullW thumbs_wrap" ng-show="projectCtrl.project.type.size.length">
	<div class="fullW floatL"><label>Size of Each</label></div>
	<md-input-container ng-repeat="size in projectCtrl.project.type.size track by $index" class="col-xs-2 floatL">
		<input required name="size{{$index}}" ng-model="projectCtrl.project.type.size[$index]" placeholder="Size {{$index+1}}">
		<div ng-messages="projectForm.size{{$index}}.$error">
			<div ng-message="required">Required.</div>
		</div>
	</md-input-container>
</div>

<div class="fullW thumbs_wrap">
	<md-input-container class="md-block" flex-gt-sm ng-if="projectCtrl.project.type.type==1">
        <label>Layout Number</label>
        <input name="layoutNo" ng-model="projectCtrl.project.type.layoutNo" required>

        <div ng-messages="projectForm.layoutNo.$error" role="alert" multiple>
          <div ng-message="required" class="my-message">Layout number is compulsory</div>
        </div>
		</md-input-container>
	<div class="fullW" ng-if="projectCtrl.project.type.type==2">
		<div class="fullW floatL" ng-if="projectCtrl.project.type.size"><label>No. of flats in each tower</label></div>
		<md-input-container ng-repeat="size in projectCtrl.project.type.size track by $index" class="col-xs-2 floatL">
			<input required name="upt{{$index}}" ng-model="projectCtrl.project.type.upt[$index]" placeholder="Tower {{$index+1}}">
			<div ng-messages="projectForm.upt{{$index}}.$error">
				<div ng-message="required">Required.</div>
			</div>
		</md-input-container>

		<md-input-container class="fullW floatL">
			<label>Percent UDS</label>
			<input required name="percentUDS" ng-model="projectCtrl.project.type.percentUDS">
			<div ng-messages="projectForm.percentUDS.$error">
				<div ng-message="required">This is required.</div>
			</div>
		</md-input-container>
	</div>
	<md-input-container flex="50" ng-if="projectCtrl.project.type.type==3">
		<label>Villa Type</label>
		<md-select name="type" ng-model="projectCtrl.project.type.villaType" required md-no-asterisk="false">
			<md-option value="1">Land + Building</md-option>
			<md-option value="2">Building + UDS</md-option>
		</md-select>
	</md-input-container>
</div>

<div class="fullW floatL"><label>Rate/Sq.Feet</label></div>
<div layout="row" class="fullW floatL">
	<md-input-container flex="34">
		<label>Base Price</label>
		<input required type="number" name="base" ng-model="projectCtrl.project.type.rps.base">
		<div ng-messages="projectForm.base.$error">
			<div ng-message="required">This is required.</div>
		</div>
	</md-input-container>
	<md-input-container flex="33">
		<label>Development Charges</label>
		<input required type="number" name="devCharges" ng-model="projectCtrl.project.type.rps.devCharges">
		<div ng-messages="projectForm.devCharges.$error">
			<div ng-message="required">This is required.</div>
		</div>
	</md-input-container>
	<md-input-container flex="33">
		<label>Other Charges</label>
		<input required type="number" name="others" ng-model="projectCtrl.project.type.rps.others">
		<div ng-messages="projectForm.others.$error">
			<div ng-message="required">This is required.</div>
		</div>
	</md-input-container>
</div>	
</script>

<!--Map-->
<script type="text/ng-template" id="step1.html">
	<div class="fullW thumbs_wrap">
		<label>Search places here</label>
        <input autofocus places-auto-complete placeholder="Search..." class="borderLt" ng-model="projectCtrl.project.location.name" component-restrictions="{country:'in'}"types="{{projectCtrl.types}}" on-place-changed="projectCtrl.placeChanged()" style="padding:5px;width:100%;font-size:20px" />
    </div>
	<div map-lazy-load="https://maps.google.com/maps/api/js"
    map-lazy-load-params="{{projectCtrl.googleMapsUrl}}" class="fullW thumbs_wrap">
      <ng-map center='current-position' geo-fallback-center="[40.74, -74.18]" style="height:60vh" geo-callback="projectCtrl.getCenter(projectCtrl, map)">
       <marker position="{{projectCtrl.coordinates}}" animation="Animation.BOUNCE" centered="true" draggable="true" on-dragend="projectCtrl.getCurrentLocation(projectCtrl)" ng-if="projectCtrl.coordinates"></marker>
     </ng-map>
    </div>
    <b class="padding10 centric fullW floatL colorg">Selected Address: {{projectCtrl.project.location.name}}</b>

    
</script>
<script type="text/ng-template" id="step4.html">

	<div layout="row" layout-wrap flex class="fullW thumbs_wrap">
    	<div class="demo-select-all-checkboxes" flex="100">
      		
			<md-input-container flex="50">
				<label>Legal Cleared by</label>
				<md-select name="legalBy" ng-model="projectCtrl.project.legalBy" required md-no-asterisk="false">
					<md-option value="1">Land + Building</md-option>
					<md-option value="2">Building + UDS</md-option>
				</md-select>
			</md-input-container>
      		<md-input-container flex="50">
				<label>Technical Cleared by</label>
				<md-select name="techBy" ng-model="projectCtrl.project.techBy" required md-no-asterisk="false">
					<md-option value="1">Land + Building</md-option>
					<md-option value="2">Building + UDS</md-option>
				</md-select>
			</md-input-container>
      		<md-checkbox ng-model="projectCtrl.project.approvals.dtcp">
       		DTCP
      		</md-checkbox>
      		<md-checkbox ng-model="projectCtrl.project.approvals.cmda">
       		CMDA
      		</md-checkbox>
      		<md-checkbox ng-model="projectCtrl.project.approvals.lpa">
       		LPA
      		</md-checkbox>
      		<md-checkbox ng-model="projectCtrl.project.approvals.panchayath">
       		Panchayath
      		</md-checkbox>
    	</div>
  	</div>
	Images, Brocure left
	<div>
		<md-button type="button" ng-click="projectCtrl.manageProject(projectCtrl.project)">Submit</md-button>
	</div>
</script>

<script type="text/ng-template" id="step5.html">
	<div class="bgw thumbs_wrap fullW" style="margin: 10px 0px" >
		<p class="colorg"><b>Only add multiple images of same context.</b>
		</p>

	    <input ngf-drop ngf-select  ngf-drag-over-class="'dragover'" ngf-multiple="true" ngf-allow-dir="false" accept="image/*" ngf-pattern="'image/*'" ng-model="upload.files" class="inputfile" name="files" id="files" type="file" multiple="true" ngf-max-size="10MB" ngf-model-invalid="errorFile" type="file" accept="image/*" image="upload.compressedFiles" resize-max-height="1200" resize-max-width="1200" resize-quality="0.8" resize-type="image/jpg" ng-image-compress />
	    <label for="files" class="valignOut drop-box thumbs_wrap fullW size15 cursorp" ng-if="!upload.files.length">Click to add images...</label>

	    <div ng-if="upload.files.length>0" class="thumbs_wrap" style="padding: 10px">
	    	<span ng-repeat="file in upload.compressedFiles" style="float: left;padding: 3px;margin:0px 5px;border:1px solid #DDD;position: relative;" class="bgw"><img ngf-thumbnail="upload.files[$index]"  height="80px" width="auto">
	    		<span style="padding: 3px;position: absolute;top: 0px;z-index:2;right: 0px;margin:0px" class="w2g" ng-click="removeImage($index)" ng-show="!imageLoading[$index]">x</span>
	    		<progress-circle diameter="20" style="position: absolute;top: 0px;height: 100%;background: rgba(255,255,255,0.7);" ng-if="imageLoading[$index]"></progress-circle>
	    	</span>
	    	<input ngf-select="addToFiles(newCompressedFiles, newFiles)" ng-model="newFiles" class="inputfile" name="newFiles" id="newFiles" type="file" multiple="true" ngf-max-size="10MB" ngf-model-invalid="errorFile" type="file" accept="image/*" image="newCompressedFiles" resize-max-height="1200" resize-max-width="1200" resize-quality="0.8" resize-type="image/jpg" ng-image-compress />
	    	<label for="newFiles" class="colorbluegreen valignOut addMore">+</label>
	        
	    </div>
    </div>

	<md-input-container flex="50">
		<label>Offers</label>
		<input required name="offers" ng-model="projectCtrl.project.offers">
		<div ng-messages="projectForm.offers.$error">
			<div ng-message="required">This is required.</div>
		</div>
	</md-input-container>
</script>